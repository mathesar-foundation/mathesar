# Mathesar 0.4.0


!!! question "Help us refine forms and files!"
	For our next release, we're actively working on:

	- better support for working with files in Mathesar
	- the ability to create forms (like Google Forms).
	
	If you're interested in either, we'd love your input! We want to make sure we're prioritizing the right problems to solve. [Talk to us for 20 min](https://cal.com/mathesar/users), we'll give you a $25 gift card as a thank you.

## Summary

Mathesar 0.4.0 introduces support for single sign-on (SSO) using OIDC, which has been requested by many of our users. We've also set up two new one-click deployment options using DigitalOcean and Railway. We've also added the ability to paste data into Mathesar without creating new rows first, which significantly simplifies the process of adding bulk data to existing tables. The release also includes a host of smaller enhancements and fixes, including the ability to view or edit JSON data from the UI.

!!! info ""
	This page provides a comprehensive list of all changes in the release.

## Improvements

### Single Sign-on (SSO)

Mathesar now supports Single Sign-On (SSO) via any identity provider that uses the OpenID Connect (OIDC) standard, including Okta, Google Workspace, and others. SSO allows users to log in using existing organizational accounts rather than managing separate Mathesar credentials.

Administrators configure SSO using a YAML file or environment variable, with support for optional settings to restricting access to specific email domains and assigning default database roles at first login. Existing users can be transitioned to SSO as long as their email addresses match, and Mathesar will preserve their roles and access. [Learn how to enable and configure SSO in our guide.]()

*Related work:* [#4634](https://github.com/mathesar-foundation/mathesar/pull/4634 "Single Sign-on (SSO)")

### Adding new rows via paste

You can now paste data directly into a table to create new rows. Previously, Mathesar supported pasting only into existing rows. This makes it possible to import data from spreadsheets, CSV files, other Mathesar tables, or any source that supports row-based copy-paste—serving as a quick alternative to bulk import.

You can paste new data into the placeholder row at the bottom of a table, and Mathesar will create as many new rows as needed. If your pasted content also overlaps _existing_ rows, those cells will be updated alongside any new rows. This means you can insert and update rows in a single paste action.

*Related work:* [#4601](https://github.com/mathesar-foundation/mathesar/pull/4601 "Implement adding rows via paste")

### New 1-click installation methods

Mathesar can now be deployed to [DigitalOcean](../administration/install-digitalocean.md) and [Railway](../administration/install-railway.md) using our 1-click guides.

These options are intended for users who are new to self-hosting or who prefer to avoid managing server infrastructure manually. Both DigitalOcean and Railway offer web-based tools for managing deployments, which can be helpful if you’d rather not work directly with server infrastructure.

We’re planning to add support for additional hosting platforms in future releases.

### JSON viewing and editing

Mathesar now properly displays and supports editing for `JSON` and `JSONB` columns. Previously, these values appeared as `[object Object]` due to a rendering issue. This fix is part of a broader effort to improve how Mathesar handles structured data. If your team works with JSON and has feedback or ideas, we’d love to [hear from you on the project in GitHub](https://github.com/mathesar-foundation/mathesar/issues/4627).

*Related work:* [#4641](https://github.com/mathesar-foundation/mathesar/pull/4641 "Stringify JSON data returned from database layer")

### Record pages column order now matches table pages

Record pages now follow the same column order as their corresponding table pages. Previously, fields on single-record pages appeared in the order defined in PostgreSQL. This caused confusion  during data entry. With this update, the field order on record pages is consistent with the table view, making it easier to review and edit records without losing context.

Special thanks to community member [@vishaljoshi789](https://github.com/vishaljoshi789) for the fix.

*Related work:* [#4584](https://github.com/mathesar-foundation/mathesar/pull/4584 "Added table page column order on record pages")

## Groundwork

### Forms

This release includes backend groundwork for a new Forms feature, which will allow users to collect structured data through public, shareable forms—without requiring logins or exposing the rest of a Mathesar instance.

We’ve added core data models, API endpoints for creating, listing, replacing, and deleting forms, and early prototypes for how forms will appear on the Schema page. This functionality is hidden in 0.4.0 but will be published in an upcoming Mathesar release.

*Related work:*

[#4565](https://github.com/mathesar-foundation/mathesar/pull/4565 "Merge Forms feature branch into develop")
[#4536](https://github.com/mathesar-foundation/mathesar/pull/4536 "Add `forms.add` RPC endpoint")
[#4576](https://github.com/mathesar-foundation/mathesar/pull/4576 "Design prototype for listing Forms on the Schema page")
[#4554](https://github.com/mathesar-foundation/mathesar/pull/4554 "Add form `get`, `list` & `delete` RPC endpoints")
[#4577](https://github.com/mathesar-foundation/mathesar/pull/4577 "Add `forms.get_public` rpc endpoint")
[#4525](https://github.com/mathesar-foundation/mathesar/pull/4525 "Form models")
[#4642](https://github.com/mathesar-foundation/mathesar/pull/4642 "Hide forms for 0.4.0")
[#4585](https://github.com/mathesar-foundation/mathesar/pull/4585 "Add `forms.replace` rpc endpoint")
[#4568](https://github.com/mathesar-foundation/mathesar/pull/4568 "Ensure server integrity for forms")

### Experimental "readonly" Mathesar role

!!! warning "This feature is for advanced users"
    This management command may cause unintended behavior and is not officially supported.

We’ve added an experimental way to run Mathesar in full read-only mode. This allows for example, hosting a public-facing instance where users can browse and explore data without making any lasting changes, useful for sharing live demos or datasets safely. Setup involves creating a restricted database role and updating your deployment.

??? info "Instructions for use (Please proceed with caution.)"
    1. **Create a PostgreSQL database role** with read-only access to your user data.
    2. **Create a Mathesar user** and assign it to that role.
    3. **Log in as that user** to complete the first-time password setup.
    4. **Run the management command** to restrict Django state:
        ```bash
        docker exec -it mathesar_service_dev python manage.py add_readonly_django -v 3 mathesar_ro_django
        ```
    5. **Update your `docker-compose.yml`** to make Mathesar use the read-only role for Django.
    6. **Restart the service** to apply the changes.

    The result is an instance that allows login and viewing but blocks any permanent changes to user or app state.


*Related work:* [#4571](https://github.com/mathesar-foundation/mathesar/pull/4571 "EXPERIMENTAL: Add read-only Django role creation")

## Documentation

### New public feature roadmap

We’ve [published a roadmap](https://github.com/orgs/mathesar-foundation/projects/2) for Mathesar on our GitHub repository. It outlines the major features and improvements we're planning, so contributors and users can better understand where the project is headed.

We're working on bringing this roadmap to our website as well, with more details and context coming soon. If you’re curious about what's next—or want to get involved—this is a good place to start.

*Related work:*
[#4586](https://github.com/mathesar-foundation/mathesar/pull/4586 "Create roadmap issue template.")
[#4630](https://github.com/mathesar-foundation/mathesar/pull/4630 "Roadmap template update")
[#4631](https://github.com/mathesar-foundation/mathesar/pull/4631 "Add roadmap to README")
[#4611](https://github.com/mathesar-foundation/mathesar/pull/4611 "Add Mathesar version to bug report")
[#4614](https://github.com/mathesar-foundation/mathesar/pull/4614 "Updated default type label associated with roadmap item template.")

### New guide for translators

If you’re interested in helping translate Mathesar into your preferred language, we’ve [published a new guide](https://wiki.mathesar.org/engineering/translator-guide/) with everything you need to get started.

### Dataset instructions for developers

We’ve clarified our [instructions for loading and using sample datasets](https://github.com/mathesar-foundation/mathesar/blob/develop/DEVELOPER_GUIDE.md#loading-sample-data) to make it easier for contributors to test features and explore the app with realistic data.

*Related work:* [#4581](https://github.com/mathesar-foundation/mathesar/pull/4581 "Clarify sample datasets in the Developer Guide")

## Maintenance

- Add an application name to all database connections and limit the connection pool size to 2. [#4566](https://github.com/mathesar-foundation/mathesar/pull/4566 "Conn leak bug")
- Rename Column & Constraint TS types to make way for models [#4562](https://github.com/mathesar-foundation/mathesar/pull/4562 "Rename Column & Constraint TS types to make way for models")
- Ensure batched RPC responses are ordered as per the order of requests [#4583](https://github.com/mathesar-foundation/mathesar/pull/4583 "Ensure batched RPC responses are ordered as per the order of requests")
- Allow static props for RPC requests in AsyncRpcApiStore [#4574](https://github.com/mathesar-foundation/mathesar/pull/4574 "Allow static props for RPC requests in AsyncRpcApiStore")

## Upgrading to 0.4.0  {:#upgrading}

### For installations using Docker Compose

If you have a Docker compose installation, run the command below:

```
docker compose -f /etc/mathesar/docker-compose.yml up --pull always -d
```

!!! warning "Your installation directory may be different"
    You may need to change `/etc/mathesar/` in the command above if you chose to install Mathesar to a different directory.

### For direct installations of Mathesar on Linux, macOS, or WSL

Mathesar provides an install script that automates both fresh installs and upgrades for standalone (non-Docker) installations.

!!! tip "Previously referred to as "Installation from scratch""
    In versions earlier than 0.3.0, this setup was referred to as "Installation from scratch".

Follow the steps below to upgrade Mathesar:


1. Enter your installation directory into the box below and press <kbd>Enter</kbd> to personalize this guide:

    <input data-input-for="MATHESAR_INSTALL_DIR" aria-label="Your Mathesar installation directory"/>

    - Do _not_ include a trailing slash.
    - Do _not_ use any variables like `$HOME`.

2.  Go to your Mathesar installation directory.

    ```
    cd xMATHESAR_INSTALL_DIRx
    ```

    !!! note
        Your installation directory may be different from above if you used a different directory when installing Mathesar.

3. Download and run the install script for 0.4.0

    ```
    curl -sSfL https://github.com/mathesar-foundation/mathesar/releases/download/0.4.0/install.sh -o install.sh
    chmod +x install.sh

    ./install.sh .
    ```

4. Replace your gunicorn systemd service with a Mathesar systemd service

    1. Disable and stop the existing gunicorn service
        ```
        systemctl disable gunicorn.service
        systemctl stop gunicorn.service
        ```

    2. Follow the steps in [Run Mathesar as a systemd service](../administration/install-from-scratch.md#run-mathesar-as-a-systemd-service) from the installation guide

    3. Remove the gunicorn service file
        ```
        sudo rm /lib/systemd/system/gunicorn.service
        ```

5. Update your Caddyfile

    1. Use the configuration shown in [Install and configure Caddy](.md#install-and-configure-caddy) in the installation guide, and update your Caddyfile accordingly

    2. Ensure that your domains are specified directly in the first line of the Caddyfile

    3. Restart your Caddy service
      ```
      systemctl restart caddy.service
      ```

!!! tip
    **If you're running Mathesar only on localhost and do not want it to run as a service**, you could:

    1. Remove the gunicorn and caddy services
    1. Start Mathesar manually with:
      ```
      mathesar run
      ```
