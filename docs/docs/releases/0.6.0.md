# Mathesar 0.6.0

## Summary

Mathesar 0.6.0 introduces file columns which allow you to upload, download, and preview files alongside your data. This release also brings a refreshed visual style to Mathesar, introducing semantic colors that make it easier to distinguish between databases, schemas, tables, and more at a glance.

!!! info ""
	This page provides a comprehensive list of all changes in the release.

## Improvements
<!-- (Each feature within this section should have its own level-three heading) -->

### File columns

Mathesar now supports [file columns](../user-guide/files.md), which let you attach and interact with files directly in your tables. Any file type can be stored, with images showing a thumbnail preview that can be expanded to a larger view. Other file types display an icon with file details. Files can be downloaded or removed from a row at any time.

To use file columns, you'll first need to [configure an S3-compatible storage backend](../administration/file-backend-config.md). Once configured, you can add file columns just like any other column type, then upload files through the Mathesar interface.

*Related work:*

[#4757](https://github.com/mathesar-foundation/mathesar/pull/4757 "File attachment feature") [#4563](https://github.com/mathesar-foundation/mathesar/pull/4563 "Standardize colors") [#4758](https://github.com/mathesar-foundation/mathesar/pull/4758 "Files UI â€” first pass") [#4728](https://github.com/mathesar-foundation/mathesar/pull/4728 "File attachment loading") [#4770](https://github.com/mathesar-foundation/mathesar/pull/4770 "Implement File column configuration") [#4795](https://github.com/mathesar-foundation/mathesar/pull/4795 "Handle file cell keyboard interactions and some bug fixes") [#4783](https://github.com/mathesar-foundation/mathesar/pull/4783 "Files non-image cell dropdown") [#4779](https://github.com/mathesar-foundation/mathesar/pull/4779 "Implement FileInput component for record page") [#4739](https://github.com/mathesar-foundation/mathesar/pull/4739 "Merge pull request #4715 from mathesar-foundation/release-0.6.0") [#4768](https://github.com/mathesar-foundation/mathesar/pull/4768 "File upload UI") [#4778](https://github.com/mathesar-foundation/mathesar/pull/4778 "Automate resetting mashes for files") [#4788](https://github.com/mathesar-foundation/mathesar/pull/4788 "Disable File type when file_backends are not configured") [#4564](https://github.com/mathesar-foundation/mathesar/pull/4564 "Fix code related issues, types, linting errors etc., in Colors experiment PR") [#4790](https://github.com/mathesar-foundation/mathesar/pull/4790 "Fix appearance of File cell in several places") [#4793](https://github.com/mathesar-foundation/mathesar/pull/4793 "Support additional file icons") [#4784](https://github.com/mathesar-foundation/mathesar/pull/4784 "Improve lightbox loading indicator") [#4791](https://github.com/mathesar-foundation/mathesar/pull/4791 "Handle race conditions when clicking to preview images") [#4762](https://github.com/mathesar-foundation/mathesar/pull/4762 "File attachment upload") [#4782](https://github.com/mathesar-foundation/mathesar/pull/4782 "Initial file cell appearance for non-images") [#4777](https://github.com/mathesar-foundation/mathesar/pull/4777 "Add tooltips in image file viewer when labels are hidden") [#4781](https://github.com/mathesar-foundation/mathesar/pull/4781 "File attachment maintenance") [#4798](https://github.com/mathesar-foundation/mathesar/pull/4798 "Improve lightbox display for extra small images") [#4780](https://github.com/mathesar-foundation/mathesar/pull/4780 "Polish flow for deleting file from lightbox") [#4760](https://github.com/mathesar-foundation/mathesar/pull/4760 "Add File backends to Common Data") [#4792](https://github.com/mathesar-foundation/mathesar/pull/4792 "Fix regression in lightbox loading indicator") [#4800](https://github.com/mathesar-foundation/mathesar/pull/4800 "A few small Files fixes") [#4776](https://github.com/mathesar-foundation/mathesar/pull/4776 "Prevent file columns from being added to forms") [#4801](https://github.com/mathesar-foundation/mathesar/pull/4801 "Better lightbox background for transparent and small images") [#4794](https://github.com/mathesar-foundation/mathesar/pull/4794 "Fix file input size for non-images") [#4799](https://github.com/mathesar-foundation/mathesar/pull/4799 "Prevent file upload in disabled cells") [#4786](https://github.com/mathesar-foundation/mathesar/pull/4786 "Fix Key Error for deleted file column ")

## Refreshed visual style with semantic colors

Mathesar's interface now uses semantic colors to help you quickly understand and navigate your data. Databases, schemas, tables, and other objects each have distinct colors, making it easier to tell them apart at a glance. This update brings a clearer, more consistent visual style across the application, improving readability and reducing the cognitive load when working with complex datasets.

*Related work:*

[#4563](https://github.com/mathesar-foundation/mathesar/pull/4563 "Standardize colors")

## Bug fixes

- Moved installation page language-switcher to top right corner [#4735](https://github.com/mathesar-foundation/mathesar/pull/4735 "Move language-switcher to top right corner in installation template")
- Fixed JSON rendering in the data explorer and in lists [#4741](https://github.com/mathesar-foundation/mathesar/pull/4741 "Fix `JSON(B)` & `JSON(B)[]` rendering for table page and data explorer")
- Fixed an issue with placeholder cell focus [#4802](https://github.com/mathesar-foundation/mathesar/pull/4802 "Keep focus on selected placeholder cell on plane changes") [#4816](https://github.com/mathesar-foundation/mathesar/pull/4816 "Revert PR #4802") [#4822](https://github.com/mathesar-foundation/mathesar/pull/4822 "Focus cell after value update")
- Now correctly fetch records data when adding a constraint [#4734](https://github.com/mathesar-foundation/mathesar/pull/4734 "Fetch records data when adding a constraint")
- Improved keyboard navigation for the form builder [#4748](https://github.com/mathesar-foundation/mathesar/pull/4748 "Improve keyboard navigation for the form builder")
- Now properly clear all statuses and errors when inserting a new row [#4746](https://github.com/mathesar-foundation/mathesar/pull/4746 "Clear all statuses and errors when inserting a new row")

## Maintenance

- Write 0.6.0 release notes [#4813](https://github.com/mathesar-foundation/mathesar/pull/4813 "0.6.0 Release Notes and Files documentation")
- Add Form analytics [#4726](https://github.com/mathesar-foundation/mathesar/pull/4726 "Add Form analytics")
- Bump django from 4.2.22 to 4.2.24 [#4755](https://github.com/mathesar-foundation/mathesar/pull/4755 "Bump django from 4.2.22 to 4.2.24")

## Upgrading to 0.6.0 {:#upgrading}

### For installations using Docker Compose

If you have a Docker compose installation, run the command below:

```
docker compose -f /etc/mathesar/docker-compose.yml up --pull always -d
```

!!! warning "Your installation directory may be different"
    You may need to change `/etc/mathesar/` in the command above if you chose to install Mathesar to a different directory.

### For direct installations of Mathesar on Linux, macOS, or WSL

Mathesar provides an install script that automates both fresh installs and upgrades for standalone (non-Docker) installations.

!!! tip "Previously referred to as "Installation from scratch""
    In versions earlier than 0.3.0, this setup was referred to as "Installation from scratch".

Follow the steps below to upgrade Mathesar:


1. Enter your installation directory into the box below and press <kbd>Enter</kbd> to personalize this guide:

    <input data-input-for="MATHESAR_INSTALL_DIR" aria-label="Your Mathesar installation directory"/>

    - Do _not_ include a trailing slash.
    - Do _not_ use any variables like `$HOME`.

2.  Go to your Mathesar installation directory.

    ```
    cd xMATHESAR_INSTALL_DIRx
    ```

    !!! note
        Your installation directory may be different from above if you used a different directory when installing Mathesar.

3. Download and run the install script for 0.6.0
    ```
    curl -sSfL https://github.com/mathesar-foundation/mathesar/releases/download/0.6.0/nstall.sh -o install.sh
    chmod +x install.sh

    ./install.sh .
    ```

4. Replace your gunicorn systemd service with a Mathesar systemd service

    1. Disable and stop the existing gunicorn service
        ```
        systemctl disable gunicorn.service
        systemctl stop gunicorn.service
        ```

    2. Follow the steps in [Run Mathesar as a systemd service](../administration/install-from-scratch.md#run-mathesar-as-a-systemd-service) from the installation guide

    3. Remove the gunicorn service file
        ```
        sudo rm /lib/systemd/system/gunicorn.service
        ```

5. Update your Caddyfile

    1. Use the configuration shown in [Install and configure Caddy](.md#install-and-configure-caddy) in the installation guide, and update your Caddyfile accordingly

    2. Ensure that your domains are specified directly in the first line of the Caddyfile

    3. Restart your Caddy service
      ```
      systemctl restart caddy.service
      ```

!!! tip
    **If you're running Mathesar only on localhost and do not want it to run as a service**, you could:

    1. Remove the gunicorn and caddy services
    1. Start Mathesar manually with:
      ```
      mathesar run
      ```
