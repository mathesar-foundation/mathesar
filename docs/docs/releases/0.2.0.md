# Mathesar 0.2.0 (beta)

## Summary

Version 0.2.0 is Mathesar's first **beta** release and features a brand new [access control system](#permissions), massive [performance improvements](#performance), and an important [security fix](#data-files).

**We do not fully support upgrading from previous versions to `0.2.0`.** For more details see [below](#upgrading).

_This page provides a comprehensive list of all changes since version 0.1.7._

## Security Fixes

### Fix unauthorized access to cached import data {:#data-files}

- **Risk**: Information disclosure
- **Severity**: Low-medium
- **Affected versions**: 0.1.0 - 0.1.7
- **Description**:

    Mathesar has a feature to import data into a new table via uploading a CSV file. During the import process, the uploaded CSV file is cached within Mathesar and never actually deleted.

    Prior to version 0.2.0, all authenticated users were able to use Mathesar's API to read the cached data for all imports which had ever been performed by any user. This could allow one authenticated user to maliciously read another user's uploaded data. (Anonymous users are not affected — they have never been able to read any cached import data.)

    From version 0.2.0 onwards, Mathesar only allows each user to read _their own_ cached import data.

    If any of your users might have imported CSV data through Mathesar which they would like to keep private from _other users within the same Mathesar installation_, then we recommend moving your Mathesar installation to 0.2.0.

- **Fixed via**: [#4157](https://github.com/mathesar-foundation/mathesar/pull/4157)

- **Work-around**:

    To mitigate an older version of Mathesar against this vulnerability _without_ upgrading, you can delete all the cached import data files with the following steps.

    ??? info "How to delete your cached import data files"
        1. Run `docker ps` to identify the name of your running Mathesar container. This is commonly named `mathesar_service` but might vary depending on how you have installed Mathesar
        1. Run `docker exec -it mathesar_service bash` to open a shell within your running Mathesar service container. (Replace "mathesar_service" with the name of your container determined above, if needed.)
        1. From within the shell, run the following command to _list_ your cached import data files.
        
            ```
            ls -la /code/.media/*
            ```
        1. Run the following command to _remove all_ your cached import data files:

            ```
            rm -rf /code/.media/*
            ```

    Note that after performing this work-around, subsequent imports will still be vulnerable to this bug until you upgrade to Mathesar 0.2.0.

## Improvements

### New access control system based on PostgreSQL roles and privileges {:#permissions}

We've completely redesigned Mathesar's [access controls](../user-guide/access-control.md) to leverage PostgreSQL's powerful system of roles and privileges. Each Mathesar user will now be assigned to a specific PostgreSQL role so that all their operations on the underlying database will be performed using that role.

<!-- TODO_SCREENSHOT: Add collaborator modal, showing a user selected and a role selected -->

The new system gives Mathesar several new capabilities. You can use Mathesar to configure roles and privileges in PostgreSQL and to set granular access control at the individual schema and table level. Plus Mathesar will respect all these configurations when performed directly in PostgreSQL by database administrators outside of Mathesar. Mathesar also no longer needs a database superuser for day-to-day operations.

<!-- TODO_SCREENSHOT: DB settings > "Roles" page with a variety of roles and child roles listed -->

<!-- TODO_SCREENSHOT: table permissions modal showing a variety of granted privileges -->

[#3626](https://github.com/mathesar-foundation/mathesar/pull/3626 "Initial permissions remodel")
[#3663](https://github.com/mathesar-foundation/mathesar/pull/3663 "Implement RPC endpoint for listing roles in server")
[#3665](https://github.com/mathesar-foundation/mathesar/pull/3665 "Initial `database_setup` RPC functions")
[#3667](https://github.com/mathesar-foundation/mathesar/pull/3667 "Cast OID values to bigint in msar.get_roles")
[#3684](https://github.com/mathesar-foundation/mathesar/pull/3684 "Endpoints for servers, collaborators")
[#3685](https://github.com/mathesar-foundation/mathesar/pull/3685 "Endpoints for configured roles")
[#3689](https://github.com/mathesar-foundation/mathesar/pull/3689 "Remove existing permissions logic on the frontend")
[#3710](https://github.com/mathesar-foundation/mathesar/pull/3710 "Homepage changes for database connections")
[#3711](https://github.com/mathesar-foundation/mathesar/pull/3711 "Homepage UI")
[#3750](https://github.com/mathesar-foundation/mathesar/pull/3750 "Implement `database_privileges.list_direct` RPC endpoint.")
[#3760](https://github.com/mathesar-foundation/mathesar/pull/3760 "Implement `database_privileges.get_owner_oid_and_curr_role_db_priv` RPC endpoint")
[#3762](https://github.com/mathesar-foundation/mathesar/pull/3762 "Database page role configuration, collaborators, roles")
[#3769](https://github.com/mathesar-foundation/mathesar/pull/3769 "Implement `roles.add` RPC endpoint")
[#3781](https://github.com/mathesar-foundation/mathesar/pull/3781 "Add `database_privileges.replace_for_roles` RPC function.")
[#3786](https://github.com/mathesar-foundation/mathesar/pull/3786 "Add `schema_privileges.replace_for_roles` RPC function")
[#3789](https://github.com/mathesar-foundation/mathesar/pull/3789 "Move DB page contexts to the route level")
[#3795](https://github.com/mathesar-foundation/mathesar/pull/3795 "Add privilege information fields")
[#3810](https://github.com/mathesar-foundation/mathesar/pull/3810 "Database permissions modal - 'Share' tab")
[#3833](https://github.com/mathesar-foundation/mathesar/pull/3833 "Implement `transfer_ownership` for schemas and tables")
[#3836](https://github.com/mathesar-foundation/mathesar/pull/3836 "Implement Permissions modal -> 'Share' tab for Schemas")
[#3838](https://github.com/mathesar-foundation/mathesar/pull/3838 "Implement permissions modal for schemas and tables")
[#3840](https://github.com/mathesar-foundation/mathesar/pull/3840 "Allow setting owner at Creation")
[#3858](https://github.com/mathesar-foundation/mathesar/pull/3858 "Implement `roles.delete`, `databases.drop` & `databases.configured.disconnect` endpoints")
[#3859](https://github.com/mathesar-foundation/mathesar/pull/3859 "Implement 'Transfer ownership' tabs")
[#3861](https://github.com/mathesar-foundation/mathesar/pull/3861 "permission checks in all pages, Disconnect database option")
[#3869](https://github.com/mathesar-foundation/mathesar/pull/3869 "Bugfix `get_current_role` when only one role exists")
[#3881](https://github.com/mathesar-foundation/mathesar/pull/3881 "Grant appropriate permissions for `msar`, `__msar` and `mathesar_types` to `PUBLIC`")
[#3895](https://github.com/mathesar-foundation/mathesar/pull/3895 "Filter databases for admin and standard users")
[#3922](https://github.com/mathesar-foundation/mathesar/pull/3922 "Fix logic in `get_current_role`")
[#3931](https://github.com/mathesar-foundation/mathesar/pull/3931 "Fix quoting for role grant/revoke expressions")
[#3958](https://github.com/mathesar-foundation/mathesar/pull/3958 "Bugfix msar.set_members")
[#3966](https://github.com/mathesar-foundation/mathesar/pull/3966 "Fix missing links in cell context menu")
[#3982](https://github.com/mathesar-foundation/mathesar/pull/3982 "Fix some bugs from milestone testing-2")
[#4011](https://github.com/mathesar-foundation/mathesar/pull/4011 "Return correct permission denied exception from SQL functions")
[#4024](https://github.com/mathesar-foundation/mathesar/pull/4024 "Allow only superusers to disconnect configured DBs")
[#4082](https://github.com/mathesar-foundation/mathesar/pull/4082 "Added Table Permission Modal in Table Card Menu")
[#4104](https://github.com/mathesar-foundation/mathesar/pull/4104 "Fix confusing role field on user edit form")
[#4132](https://github.com/mathesar-foundation/mathesar/pull/4132 "Handle errors better, Show a clearer error when user is not a collaborator on a database")
[#4075](https://github.com/mathesar-foundation/mathesar/pull/4075 "Generated Identity for example datasets")

### Substantial performance improvements {:#performance}

Mathesar is now much faster! Most pages load about 5x faster, and large imports run about 50x faster.

Also, you'll no longer need to manually "sync database schema changes" to Mathesar. Now, any DDL changes will be reflected in Mathesar automatically!

To achieve these gains, we've significantly overhauled Mathesar's backend architecture, moving a large chunk of the application code into the database itself, and migrating to a new [API](../api/index.md).

<!-- TODO_SCREENSHOT: It could be neat to produce a bar chart here showing page load times across a few pages on 0.1.7 (prod) vs 0.2.0 (prod). This would take some time, but might be worth it.

Some pages in the library management schema that would demo perf improvements well:

- The record page for Author id 225 Robert Jordan
- The books table
- Importing something
 -->

[#3543](https://github.com/mathesar-foundation/mathesar/pull/3543 "Connections RPC front end")
[#3547](https://github.com/mathesar-foundation/mathesar/pull/3547 "Exception handler tests")
[#3556](https://github.com/mathesar-foundation/mathesar/pull/3556 "Add `columns.list` function")
[#3586](https://github.com/mathesar-foundation/mathesar/pull/3586 "Col delete func")
[#3588](https://github.com/mathesar-foundation/mathesar/pull/3588 "Fix SQL syntax highlighting in VS code for SQL tests")
[#3589](https://github.com/mathesar-foundation/mathesar/pull/3589 "Remove dead front end API client code to GET one schema")
[#3597](https://github.com/mathesar-foundation/mathesar/pull/3597 "Refactor list of RPC methods to test")
[#3598](https://github.com/mathesar-foundation/mathesar/pull/3598 "Implement `schemas.list` RPC method")
[#3599](https://github.com/mathesar-foundation/mathesar/pull/3599 "Implement `tables.list` rpc endpoint")
[#3608](https://github.com/mathesar-foundation/mathesar/pull/3608 "Implement `tables.delete` RPC endpoint")
[#3610](https://github.com/mathesar-foundation/mathesar/pull/3610 "Implement `schemas.delete` RPC method")
[#3612](https://github.com/mathesar-foundation/mathesar/pull/3612 "Implement `tables.get` RPC endpoint")
[#3614](https://github.com/mathesar-foundation/mathesar/pull/3614 "Implement `tables.add` RPC endpoint")
[#3615](https://github.com/mathesar-foundation/mathesar/pull/3615 "Add `columns.patch` RPC function")
[#3616](https://github.com/mathesar-foundation/mathesar/pull/3616 "Add `columns.add` RPC function")
[#3618](https://github.com/mathesar-foundation/mathesar/pull/3618 "Implement `tables.patch` RPC endpoint")
[#3620](https://github.com/mathesar-foundation/mathesar/pull/3620 "Implement `schemas.add` RPC method")
[#3623](https://github.com/mathesar-foundation/mathesar/pull/3623 "Implement `table.import` RPC endpoint")
[#3628](https://github.com/mathesar-foundation/mathesar/pull/3628 "Implement `schemas.patch` RPC method")
[#3632](https://github.com/mathesar-foundation/mathesar/pull/3632 "Wire RPC functions to new models")
[#3633](https://github.com/mathesar-foundation/mathesar/pull/3633 "Quoting refactor")
[#3635](https://github.com/mathesar-foundation/mathesar/pull/3635 "Implement `tables.get_import_preview` RPC endpoint")
[#3637](https://github.com/mathesar-foundation/mathesar/pull/3637 "Auto generate table name")
[#3641](https://github.com/mathesar-foundation/mathesar/pull/3641 "Add `columns.metadata.list` RPC function")
[#3646](https://github.com/mathesar-foundation/mathesar/pull/3646 "Implement `tables.metadata` `list` & `patch` RPC endpoint")
[#3648](https://github.com/mathesar-foundation/mathesar/pull/3648 "Use schemas RPC APIs in the front end on the database page")
[#3649](https://github.com/mathesar-foundation/mathesar/pull/3649 "Allow un-setting schema comment using NULL")
[#3650](https://github.com/mathesar-foundation/mathesar/pull/3650 "Drop old SQL function signature")
[#3651](https://github.com/mathesar-foundation/mathesar/pull/3651 "Implement tables list and delete RPC APIs")
[#3653](https://github.com/mathesar-foundation/mathesar/pull/3653 "Columns meta RPC patch")
[#3664](https://github.com/mathesar-foundation/mathesar/pull/3664 "Constraints RPC transition")
[#3666](https://github.com/mathesar-foundation/mathesar/pull/3666 "Cast OIDs to bigint before putting in JSON")
[#3669](https://github.com/mathesar-foundation/mathesar/pull/3669 "RPC implementation for `tables.list_joinable`")
[#3672](https://github.com/mathesar-foundation/mathesar/pull/3672 "Improve tables metadata")
[#3676](https://github.com/mathesar-foundation/mathesar/pull/3676 "RPC implementation for `types.list`")
[#3691](https://github.com/mathesar-foundation/mathesar/pull/3691 "Add `records.list` RPC function")
[#3694](https://github.com/mathesar-foundation/mathesar/pull/3694 "RPC transition for explorations `list` and `delete`")
[#3696](https://github.com/mathesar-foundation/mathesar/pull/3696 "Implement `explorations.run` RPC endpoint")
[#3698](https://github.com/mathesar-foundation/mathesar/pull/3698 "Fix return type error when re-defining `get_constraints_for_table` SQL function")
[#3699](https://github.com/mathesar-foundation/mathesar/pull/3699 "Fix Issues with `tables.patch` RPC method")
[#3700](https://github.com/mathesar-foundation/mathesar/pull/3700 "RPC records list filtering")
[#3702](https://github.com/mathesar-foundation/mathesar/pull/3702 "Return empty array when schema has no tables")
[#3703](https://github.com/mathesar-foundation/mathesar/pull/3703 "RPC endpoint for column info with metadata")
[#3704](https://github.com/mathesar-foundation/mathesar/pull/3704 "First steps of RPC implementation for table page")
[#3708](https://github.com/mathesar-foundation/mathesar/pull/3708 "Add `records.search` RPC function")
[#3709](https://github.com/mathesar-foundation/mathesar/pull/3709 "Wire up valid_target_type function to column lister")
[#3717](https://github.com/mathesar-foundation/mathesar/pull/3717 "Alter column metadata fields")
[#3718](https://github.com/mathesar-foundation/mathesar/pull/3718 "Add target_table_info in `tables.list_joinable's` response")
[#3721](https://github.com/mathesar-foundation/mathesar/pull/3721 "Records grouping")
[#3723](https://github.com/mathesar-foundation/mathesar/pull/3723 "Fix 'no current database' error")
[#3725](https://github.com/mathesar-foundation/mathesar/pull/3725 "Implement explorations `run_saved` & `get` RPC endpoints")
[#3728](https://github.com/mathesar-foundation/mathesar/pull/3728 "Handle new records filtering on the front end")
[#3731](https://github.com/mathesar-foundation/mathesar/pull/3731 "Implement explorations `add` & `replace` endpoint")
[#3740](https://github.com/mathesar-foundation/mathesar/pull/3740 "Add `records.get` RPC function")
[#3741](https://github.com/mathesar-foundation/mathesar/pull/3741 "Add `records.delete` RPC function")
[#3745](https://github.com/mathesar-foundation/mathesar/pull/3745 "Add `records.add` RPC function")
[#3746](https://github.com/mathesar-foundation/mathesar/pull/3746 "Adapt front end to new RPC-based joinable tables API")
[#3748](https://github.com/mathesar-foundation/mathesar/pull/3748 "Fix edge case while getting joinable tables for tables with no links")
[#3749](https://github.com/mathesar-foundation/mathesar/pull/3749 "Add `records.patch` RPC function")
[#3751](https://github.com/mathesar-foundation/mathesar/pull/3751 "Records grouping bugfix")
[#3754](https://github.com/mathesar-foundation/mathesar/pull/3754 "Records delete bugfix")
[#3755](https://github.com/mathesar-foundation/mathesar/pull/3755 "Adapt front end to new records grouping API")
[#3759](https://github.com/mathesar-foundation/mathesar/pull/3759 "Implement RPC records CRUD operations on front end")
[#3761](https://github.com/mathesar-foundation/mathesar/pull/3761 "Add simplified record summaries")
[#3767](https://github.com/mathesar-foundation/mathesar/pull/3767 "Add link-adding RPC functions")
[#3771](https://github.com/mathesar-foundation/mathesar/pull/3771 "Add `data_modeling.suggest_types` function.")
[#3782](https://github.com/mathesar-foundation/mathesar/pull/3782 "Add `schema_privileges.list_direct` RPC function")
[#3783](https://github.com/mathesar-foundation/mathesar/pull/3783 "Add `table_privileges.list_direct` RPC function")
[#3791](https://github.com/mathesar-foundation/mathesar/pull/3791 "Add `table_privileges.replace_for_roles` RPC function")
[#3796](https://github.com/mathesar-foundation/mathesar/pull/3796 "Add `roles.get_current_role` RPC function")
[#3799](https://github.com/mathesar-foundation/mathesar/pull/3799 "Reorganize namespacing")
[#3800](https://github.com/mathesar-foundation/mathesar/pull/3800 "Hard-code abstract types response in client")
[#3802](https://github.com/mathesar-foundation/mathesar/pull/3802 "Change response structure for record summary")
[#3803](https://github.com/mathesar-foundation/mathesar/pull/3803 "Implement `data_modeling.split_table` RPC functions")
[#3804](https://github.com/mathesar-foundation/mathesar/pull/3804 "Modify pkey finder to return False when no pkey exists")
[#3807](https://github.com/mathesar-foundation/mathesar/pull/3807 "Change response for `tables.add` and `tables.import`")
[#3808](https://github.com/mathesar-foundation/mathesar/pull/3808 "Add summaries to self")
[#3809](https://github.com/mathesar-foundation/mathesar/pull/3809 "Move columns SQL")
[#3811](https://github.com/mathesar-foundation/mathesar/pull/3811 "Propagate RPC record summary changes to front end")
[#3813](https://github.com/mathesar-foundation/mathesar/pull/3813 "Add `data_file_id` field to `TableMetaData`")
[#3814](https://github.com/mathesar-foundation/mathesar/pull/3814 "Implement `data_modeling.move_columns` RPC endpoint")
[#3819](https://github.com/mathesar-foundation/mathesar/pull/3819 "Get imports working again")
[#3821](https://github.com/mathesar-foundation/mathesar/pull/3821 "Implement `databases.privileges.transfer_ownership` RPC endpoint")
[#3823](https://github.com/mathesar-foundation/mathesar/pull/3823 "Implement `tables.get_with_metadata` RPC endpoint")
[#3824](https://github.com/mathesar-foundation/mathesar/pull/3824 "Use data file name as table name during import")
[#3825](https://github.com/mathesar-foundation/mathesar/pull/3825 "A couple small front end RPC changes")
[#3831](https://github.com/mathesar-foundation/mathesar/pull/3831 "Bugfix listing records from a table with self-Referential FK")
[#3832](https://github.com/mathesar-foundation/mathesar/pull/3832 "Hard-code type cast map on front end")
[#3837](https://github.com/mathesar-foundation/mathesar/pull/3837 "Alter response for schemas `add` and `patch` endpoints & implement `schemas.get`")
[#3843](https://github.com/mathesar-foundation/mathesar/pull/3843 "Propagate RPC changes to record selector")
[#3845](https://github.com/mathesar-foundation/mathesar/pull/3845 "Use RPC API for column metadata")
[#3847](https://github.com/mathesar-foundation/mathesar/pull/3847 "Propagate RPC changes to link table dialog")
[#3850](https://github.com/mathesar-foundation/mathesar/pull/3850 "Fix response for `split_table`")
[#3852](https://github.com/mathesar-foundation/mathesar/pull/3852 "Alter response for record summaries with NULL records")
[#3853](https://github.com/mathesar-foundation/mathesar/pull/3853 "Make `records.get` work with stringified PK values")
[#3855](https://github.com/mathesar-foundation/mathesar/pull/3855 "Enabling running of very simple explorations")
[#3856](https://github.com/mathesar-foundation/mathesar/pull/3856 "Get 'extract columns' and 'move columns' functionality working again")
[#3857](https://github.com/mathesar-foundation/mathesar/pull/3857 "Allow patching records via string PKs")
[#3866](https://github.com/mathesar-foundation/mathesar/pull/3866 "Implement `roles.set_members` RPC endpoint")
[#3873](https://github.com/mathesar-foundation/mathesar/pull/3873 "Deserialize transformations before creating DBQuery object")
[#3879](https://github.com/mathesar-foundation/mathesar/pull/3879 "Fix updating of table name")
[#3884](https://github.com/mathesar-foundation/mathesar/pull/3884 "Bugfix summarizations")
[#3885](https://github.com/mathesar-foundation/mathesar/pull/3885 "Fix insert for table with only ID column")
[#3892](https://github.com/mathesar-foundation/mathesar/pull/3892 "Add `schema_oid` to `Explorations` model")
[#3893](https://github.com/mathesar-foundation/mathesar/pull/3893 "Get explorations CRUD working again")
[#3894](https://github.com/mathesar-foundation/mathesar/pull/3894 "Fix broken exploration 'column added' indicators")
[#3897](https://github.com/mathesar-foundation/mathesar/pull/3897 "Reduces frontend caching, fixes a few bugs")
[#3909](https://github.com/mathesar-foundation/mathesar/pull/3909 "Fix bug when updating table twice")
[#3940](https://github.com/mathesar-foundation/mathesar/pull/3940 "Fix response of `explorations.run` for summarizations")
[#3948](https://github.com/mathesar-foundation/mathesar/pull/3948 "Fixes server errors when RPC exceptions are thrown while rendering common_data")
[#3974](https://github.com/mathesar-foundation/mathesar/pull/3974 "Refactor SQL install script")
[#3976](https://github.com/mathesar-foundation/mathesar/pull/3976 "SQL comments to index positional arguments")
[#3978](https://github.com/mathesar-foundation/mathesar/pull/3978 "Backend support for configurable record summaries")
[#3979](https://github.com/mathesar-foundation/mathesar/pull/3979 "Add tests for `exec_msar_func` python wrappers")
[#3983](https://github.com/mathesar-foundation/mathesar/pull/3983 "Drop all msar functions at start of install SQL")
[#3984](https://github.com/mathesar-foundation/mathesar/pull/3984 "Remove `types.list` RPC endpoint")
[#3987](https://github.com/mathesar-foundation/mathesar/pull/3987 "Frontend support for configurable record summaries")
[#3996](https://github.com/mathesar-foundation/mathesar/pull/3996 "Small bug fixes in record summary DB code")
[#4015](https://github.com/mathesar-foundation/mathesar/pull/4015 "Use mocked `exec_msar_func` calls for RPC tests")
[#4016](https://github.com/mathesar-foundation/mathesar/pull/4016 "Handle permissions edge cases within record summaries")
[#4021](https://github.com/mathesar-foundation/mathesar/pull/4021 "Add RPC functions to install/update SQL on configured databases")
[#4026](https://github.com/mathesar-foundation/mathesar/pull/4026 "Users RPC transition")
[#4035](https://github.com/mathesar-foundation/mathesar/pull/4035 "Docs and tests for `users.*` RPC endpoints")
[#4040](https://github.com/mathesar-foundation/mathesar/pull/4040 "Add `mathesar_rpc_method` decorator")
[#4116](https://github.com/mathesar-foundation/mathesar/pull/4116 "Add support for wide tables")
[#4123](https://github.com/mathesar-foundation/mathesar/pull/4123 "Implement UI for upgrading databases")
[#4046](https://github.com/mathesar-foundation/mathesar/pull/4046 "Fix bug on column type options form")
[#4065](https://github.com/mathesar-foundation/mathesar/pull/4065 "Execute default expr when not dynamic.")
[#4073](https://github.com/mathesar-foundation/mathesar/pull/4073 "Fix legend missing from installed schemas checkbox group")
[#4105](https://github.com/mathesar-foundation/mathesar/pull/4105 "Fix fieldset legend displaying undefined")

### Table exports

<!-- TODO: write blurb -->

<!-- TODO_SCREENSHOT:  table page with arrow pointing to "Export" button -->

[#4090](https://github.com/mathesar-foundation/mathesar/pull/4090 "Add ability to export tables")


### More options when disconnecting a database

When disconnecting a database from Mathesar, you can now choose to remove the Mathesar schemas from the database.

<!-- TODO_SCREENSHOT: Disconnect database modal (opened when only one database is connected), with all options selected except "Specify a role" -->

[#4122](https://github.com/mathesar-foundation/mathesar/pull/4122 "Function to remove Mathesar schemas and disconnect DB")
[#4136](https://github.com/mathesar-foundation/mathesar/pull/4136 "Allow disconnecting server via `databases.configured.disconnect`")
[#4124](https://github.com/mathesar-foundation/mathesar/pull/4124 "Implement new UI for disconnecting DBs")

### Small usability improvements

- Persist visibility of table inspector sections [#3997](https://github.com/mathesar-foundation/mathesar/pull/3997 "Persist visibility of table inspector sections")
- Default to case-insensitive comparison when filtering records [#4131](https://github.com/mathesar-foundation/mathesar/pull/4131 "Fix UX issue with case-sensitive filtering")
- Prevent `Enter` key from mistakenly altering filter value [#4078](https://github.com/mathesar-foundation/mathesar/pull/4078 "Disallow newlines in text filter input")
- Make the top navigation header behave more consistently [#4072](https://github.com/mathesar-foundation/mathesar/pull/4072 "Improve nav header behavior") [#4101](https://github.com/mathesar-foundation/mathesar/pull/4101 "Added empty state messages in breadcrumb selectors (Header)")
- Improve alignment of numeric fields on record page [#4077](https://github.com/mathesar-foundation/mathesar/pull/4077 "Left-align text within number inputs")
- Highlight newly-created items [#4089](https://github.com/mathesar-foundation/mathesar/pull/4089 "Improve UX when creating new items") [#4109](https://github.com/mathesar-foundation/mathesar/pull/4109 "Don't highlight databases/tables/schemas when filtering")
- Add entity type names to database and schema pages [#4107](https://github.com/mathesar-foundation/mathesar/pull/4107 "Add entity type names to database and schema pages")
- Simplify the schema page [#4112](https://github.com/mathesar-foundation/mathesar/pull/4112 "Remove tab container from the schema page")
- Improve the data explorer layout [#4115](https://github.com/mathesar-foundation/mathesar/pull/4115 "Improve data explorer UI layout")
- Show a loading spinner for tale pages [#3602](https://github.com/mathesar-foundation/mathesar/pull/3602 "Show a loading spinner for tale pages")
- Improve visual style and aesthetics [#3860](https://github.com/mathesar-foundation/mathesar/pull/3860 "UI consistency improvements") [#3962](https://github.com/mathesar-foundation/mathesar/pull/3962 "Swap Pill declarations to fix wrong colors in the Link Table dialog") [#3970](https://github.com/mathesar-foundation/mathesar/pull/3970 "Fix action buttons looking disabled") [#3998](https://github.com/mathesar-foundation/mathesar/pull/3998 "Minor visual improvements to the Table Inspector") [#4047](https://github.com/mathesar-foundation/mathesar/pull/4047 "Improve clarity of table inspector active tab")

### More sample data

<!-- TODO: blurb -->

<!-- TODO_SCREENSHOT: "Create a New Database" modal with all boxes checked -->

[#4142](https://github.com/mathesar-foundation/mathesar/pull/4142 "Add beta dataset loaders to setup RPC functions")


### Optional (anonymous) usage reporting

<!-- TODO: blurb -->

<!-- TODO_SCREENSHOT: page /administration/privacy/ -->

!!! info "A sample of the anonymous usage data we collect"
    ```json
    {
        "installation_id": "5f0126e9-02b0-451f-8797-6e2574b69814",
        "mathesar_version": "0.2.0",
        "user_count": 12,
        "active_user_count": 8,
        "configured_role_count": 2,
        "connected_database_count": 6,
        "connected_database_schema_count": 35,
        "connected_database_table_count": 169,
        "connected_database_record_count": 1164525,
        "exploration_count": 0
    }
    ```

[#4049](https://github.com/mathesar-foundation/mathesar/pull/4049 "Add analytics wiring")
[#4111](https://github.com/mathesar-foundation/mathesar/pull/4111 "Add analytics wiring RPC functions")
[#4126](https://github.com/mathesar-foundation/mathesar/pull/4126 "Analytics opt-in flow UI")
[#4140](https://github.com/mathesar-foundation/mathesar/pull/4140 "Add feedback uploader rpc function")
[#4141](https://github.com/mathesar-foundation/mathesar/pull/4141 "Use case feedback collection")

## Bug fixes

- Fix error when trying to reset password of other user [#3536](https://github.com/mathesar-foundation/mathesar/pull/3536 "Fix change password error")
- Handle negative numbers correctly when copying cells [#3582](https://github.com/mathesar-foundation/mathesar/pull/3582 "Handle negative numbers in TSV serialization for copy")
- Fix several subtle bugs related to selecting cells in a sheet [#3037](https://github.com/mathesar-foundation/mathesar/pull/3037 "Refactor CellSelection data structure and store") [#3968](https://github.com/mathesar-foundation/mathesar/pull/3968 "Fix browser console warnings") [#3973](https://github.com/mathesar-foundation/mathesar/pull/3973 "Fix bug when renaming exploration column")
- Fix timeout when installing Mathesar on a remote DB [#3917](https://github.com/mathesar-foundation/mathesar/pull/3917 "Fast install")
- Sort list of schemas [#4050](https://github.com/mathesar-foundation/mathesar/pull/4050 "Sort schemas in Database page and Breadcrumb selector")
- Allow users to hover over record-level error messages [#4087](https://github.com/mathesar-foundation/mathesar/pull/4087 "Added allow users to hover over record-level error messages")
- Allow scrolling on "Create Superuser" page [#4093](https://github.com/mathesar-foundation/mathesar/pull/4093 "fix: Fixed the scroll unscrollable in superuser_create page")
- Fix alignment of numbers in cells for some font families [#4097](https://github.com/mathesar-foundation/mathesar/pull/4097 "Fixed the misalignment in number text of money type cell")
- Fix 404 error from server side navigation to New User page [#4106](https://github.com/mathesar-foundation/mathesar/pull/4106 "Solved Server side navigation to New User page gives 404 error")
- Fix Save & Discard buttons always shown when viewing user [#3971](https://github.com/mathesar-foundation/mathesar/pull/3971 "Fix form state bug in Edit User")
- Improve error handling when attempting to import unsupported file types [#4028](https://github.com/mathesar-foundation/mathesar/pull/4028 "Fix error message on invalid file type import")
- Keep record selector open when double-clicking on linked record cell [#4043](https://github.com/mathesar-foundation/mathesar/pull/4043 "Allowed the record selector modal to remain open on double-clicking the selected FK cell")
- Fix redundant schema name in page titles [#4074](https://github.com/mathesar-foundation/mathesar/pull/4074 "Fix small problem with schema name in page titles")

## Documentation

### New User Guide

We've overhauled our [User Guide](../user-guide/index.md) adding a lot more content.

<!-- TODO: finish blurb -->

[#3910](https://github.com/mathesar-foundation/mathesar/pull/3910 "Permissions Documentation Updates")
[#3945](https://github.com/mathesar-foundation/mathesar/pull/3945 "Docs improvements for build from scratch")
[#4031](https://github.com/mathesar-foundation/mathesar/pull/4031 "Comprehensive documentation improvements")

### More in-app help

<!-- TODO: blurb -->

<!-- TODO_SCREENSHOT: Library management "Items" table page, table inspector open, all sections collapsed except for "Relationships". Animated Gif showing cursor hovering over the three help bubbles within this table inspector section, giving the viewer time to quickly read each help bubble -->

[#4108](https://github.com/mathesar-foundation/mathesar/pull/4108 "Add more in-app help bubbles")
[#4135](https://github.com/mathesar-foundation/mathesar/pull/4135 "Resources section and donate in-app")
[#4144](https://github.com/mathesar-foundation/mathesar/pull/4144 "Fix regression in help bubble placement")
[#4121](https://github.com/mathesar-foundation/mathesar/pull/4121 "Update public schema notice")
[#4098](https://github.com/mathesar-foundation/mathesar/pull/4098 "Fix regression: Display the Welcome page when there are no databases")

### Multi-versioned documentation

<!-- TODO: blurb -->

[#3967](https://github.com/mathesar-foundation/mathesar/pull/3967 "Document multi-version docs system")


## Features removed

### Sharable tables and explorations are no longer available

Back in version 0.1.3, we added support for "sharing" tables an explorations via a link that would allow anonymous users to view data.

<!-- TODO: finish blurb

In Mathesar 0.2.0, we've removed this feature in order to ____

-->

If you were relying on this feature, we'd like to hear from you! Please [open an issue](https://github.com/mathesar-foundation/mathesar/issues/new?template=feature_request.md) to let us know.


### Mathesar's _internal_ database may no longer be SQLite

Version 0.2.0 removes support for SQLite as an [internal database](../user-guide/databases.md#internal). If you were relying on this feature, we'd like to hear from you! Please [open an issue](https://github.com/mathesar-foundation/mathesar/issues/new?template=feature_request.md) to let us know.

[#4023](https://github.com/mathesar-foundation/mathesar/pull/4023 "Remove support for sqlite")

### Mathesar's live demo is take down

We have removed the code and infrastructure which supported Mathesar's live demo.

[#3538](https://github.com/mathesar-foundation/mathesar/pull/3538 "Remove demo code")
[#3551](https://github.com/mathesar-foundation/mathesar/pull/3551 "Remove E2E infrastructure")
[#3577](https://github.com/mathesar-foundation/mathesar/pull/3577 "Add GitHub workflow to reset demo")
[#3579](https://github.com/mathesar-foundation/mathesar/pull/3579 "Updates to GH workflow for resetting demo")
[#3580](https://github.com/mathesar-foundation/mathesar/pull/3580 "Updates to GH workflow to reset demo")
[#3581](https://github.com/mathesar-foundation/mathesar/pull/3581 "Remove the demo reset workflow")

## Maintenance

The following PRs represent work done to reduce technical debt, update dependencies, improve developer documentation, and maintain our workflows.

[#3360](https://github.com/mathesar-foundation/mathesar/pull/3360 "Add script to help resolve git merge conflicts in dict.json i18n file")
[#3535](https://github.com/mathesar-foundation/mathesar/pull/3535 "Update docs to add instructions for loading data from playground")
[#3541](https://github.com/mathesar-foundation/mathesar/pull/3541 "Remove API documentation infrastructure")
[#3544](https://github.com/mathesar-foundation/mathesar/pull/3544 "Bump dependencies")
[#3546](https://github.com/mathesar-foundation/mathesar/pull/3546 "Remove Debian build")
[#3552](https://github.com/mathesar-foundation/mathesar/pull/3552 "Sort frontend imports")
[#3558](https://github.com/mathesar-foundation/mathesar/pull/3558 "Merge pull request #3539 from mathesar-foundation/0.1.7")
[#3559](https://github.com/mathesar-foundation/mathesar/pull/3559 "Resolve merge conflict for #3558")
[#3564](https://github.com/mathesar-foundation/mathesar/pull/3564 "Remove nonsensical cast_to_email and cast_to_uri functions")
[#3567](https://github.com/mathesar-foundation/mathesar/pull/3567 "Revert #3559")
[#3568](https://github.com/mathesar-foundation/mathesar/pull/3568 "Add 0.1.7 release notes to the nav menu")
[#3569](https://github.com/mathesar-foundation/mathesar/pull/3569 "Merge pull request #3568 from mathesar-foundation/release_notes_nav")
[#3587](https://github.com/mathesar-foundation/mathesar/pull/3587 "Architectural overhaul")
[#3604](https://github.com/mathesar-foundation/mathesar/pull/3604 "Bump dependencies")
[#3643](https://github.com/mathesar-foundation/mathesar/pull/3643 "Add SQL code standard for casting OIDs to bigint")
[#3678](https://github.com/mathesar-foundation/mathesar/pull/3678 "Fix install script")
[#3695](https://github.com/mathesar-foundation/mathesar/pull/3695 "Merge breaking changes into `develop`")
[#3763](https://github.com/mathesar-foundation/mathesar/pull/3763 "Update MkDocs dependencies")
[#3918](https://github.com/mathesar-foundation/mathesar/pull/3918 "Add PostgreSQL 17 to the testing matrix")
[#3920](https://github.com/mathesar-foundation/mathesar/pull/3920 "Multi-versioned docs — `0.1.7` updates")
[#3938](https://github.com/mathesar-foundation/mathesar/pull/3938 "Use a semver library to parse our version strings on the front end")
[#3939](https://github.com/mathesar-foundation/mathesar/pull/3939 "Release 0.2.0-testing.1")
[#3943](https://github.com/mathesar-foundation/mathesar/pull/3943 "Remove GitHub action to auto-publish documentation")
[#3947](https://github.com/mathesar-foundation/mathesar/pull/3947 "Remove dead code (part 1)")
[#3949](https://github.com/mathesar-foundation/mathesar/pull/3949 "Release notes for 0.2.0-testing.1")
[#3950](https://github.com/mathesar-foundation/mathesar/pull/3950 "Merge develop into release branch.")
[#3959](https://github.com/mathesar-foundation/mathesar/pull/3959 "Merge master into testing.1 branch")
[#3961](https://github.com/mathesar-foundation/mathesar/pull/3961 "0.2.0")
[#3964](https://github.com/mathesar-foundation/mathesar/pull/3964 "Updates to 0.2.0-testing.1 release notes")
[#3972](https://github.com/mathesar-foundation/mathesar/pull/3972 "Improve front end linting")
[#3975](https://github.com/mathesar-foundation/mathesar/pull/3975 "Remove dead code 2 (the code strikes back)")
[#3981](https://github.com/mathesar-foundation/mathesar/pull/3981 "Code removal 3: clean up")
[#3985](https://github.com/mathesar-foundation/mathesar/pull/3985 "Reduce backend dependencies")
[#3988](https://github.com/mathesar-foundation/mathesar/pull/3988 "Upgrade dependencies")
[#3989](https://github.com/mathesar-foundation/mathesar/pull/3989 "Add python 13 to testing matrix")
[#3990](https://github.com/mathesar-foundation/mathesar/pull/3990 "Bump ipython from 7.34.0 to 8.10.0")
[#3991](https://github.com/mathesar-foundation/mathesar/pull/3991 "Faster CI for running backend tests")
[#3994](https://github.com/mathesar-foundation/mathesar/pull/3994 "Fix broken GitHub Sponsors link in docs")
[#3999](https://github.com/mathesar-foundation/mathesar/pull/3999 "Require all Svelte components to have a TS script block")
[#4025](https://github.com/mathesar-foundation/mathesar/pull/4025 "Add scenario testing framework, initial test")
[#4032](https://github.com/mathesar-foundation/mathesar/pull/4032 "Remove fixture util")
[#4039](https://github.com/mathesar-foundation/mathesar/pull/4039 "Added favicon icons for the page templates in base.html and added respective icons in the static folder")
[#4045](https://github.com/mathesar-foundation/mathesar/pull/4045 "Add spell-checking to MkDocs build process")
[#4060](https://github.com/mathesar-foundation/mathesar/pull/4060 "Bump django from 4.2.16 to 4.2.17")
[#4064](https://github.com/mathesar-foundation/mathesar/pull/4064 "Rename references to mathesar/mathesar-ansible to mathesar-infrastructure")
[#4076](https://github.com/mathesar-foundation/mathesar/pull/4076 "Remove TODO_BETA code comments")
[#4125](https://github.com/mathesar-foundation/mathesar/pull/4125 "Update codeql-analysis.yml to use latest codeql dependencies")
[#4133](https://github.com/mathesar-foundation/mathesar/pull/4133 "Update versions and remove unused dependency")
[#4145](https://github.com/mathesar-foundation/mathesar/pull/4145 "Reset django migrations, document upgrade")
[#3980](https://github.com/mathesar-foundation/mathesar/pull/3980 "Fix row height calculation during grouping removal")


## Upgrading to 0.2.0 {:#upgrading}

We do not fully support upgrading from previous versions to `0.2.0`. In particular, you will lose any Explorations and User accounts (e.g., usernames and passwords) you created in Mathesar during the process. Furthermore, manual steps are required.

### Prerequisite steps (run before starting Mathesar version 0.2.0)

If you want to reuse the same database server for Mathesar's internal database, you need to drop the `mathesar_django` database and recreate it on that server, using the same PostgreSQL role that you initially used to install Mathesar, or a role with superuser privileges.

#### If there is another database on the server

If there is another PostgreSQL database on the same server, first log into that other database, and then run:

```sql
DROP DATABASE mathesar_django;
CREATE DATABASE mathesar_django OWNER mathesar;  -- or whichever role you use to run Mathesar
```

#### If there is not another database on the server

If there is **not** another database on the server, it's more difficult, since you can't drop the only database on a PostgreSQL server. First, log into the `mathesar_django` database, and run:

```sql
CREATE DATABASE mathesar_temp;
```

Log out, and log into the `mathesar_temp` database. Then run:

```sql
DROP DATABASE mathesar_django;
CREATE DATABASE mathesar_django OWNER mathesar;  -- or whichever role you use to run Mathesar
```

Log out, and log into the `mathesar_django` database. Then run:

```sql
DROP DATABASE mathesar_temp;
```

After this, you're ready to proceed with the upgrade.

### For installations using Docker Compose



If you have a Docker compose installation (including one from the guided script),

1. Download the newest [docker-compose.yml](https://github.com/mathesar-foundation/mathesar/raw/{{mathesar_version}}/docker-compose.yml) file.

    ```
    wget https://github.com/mathesar-foundation/mathesar/raw/{{mathesar_version}}/docker-compose.yml
    ```

2. Modify it as per the [installation instructions](../administration/install-via-docker-compose.md), using values from your old `docker-compose.yml` file.

3. Run the command below:

    ```
    docker compose -f /etc/mathesar/docker-compose.yml up --pull always -d
    ```

### For installations done from scratch

1. Go to your Mathesar installation directory

    ```
    cd xMATHESAR_INSTALLATION_DIRx
    ```

    !!! note
        Your installation directory may be different from above if you used a different directory when installing Mathesar.

1. Pull version 0.2.0 from the repository

    ```
    git pull https://github.com/mathesar-foundation/mathesar.git
    git checkout 0.2.0
    ```

1. Update Python dependencies

    ```
    pip install -r requirements.txt
    ```

1. Activate our virtual environment

    ```
    source ./mathesar-venv/bin/activate
    ```

1. You can skip the following if you're upgrading from versions 0.1.4 and above.
    - If you're upgrading from versions <= 0.1.3, update your environment variables according to the [the new configuration specification](../administration/configuration.md#db).
    - In particular, you must put the connection info for the internal DB into new `POSTGRES_*` variables. The `DJANGO_DATABASE_URL` variable is no longer supported.

1. Add the environment variables to the shell before running Django commands

    ```
    export $(sudo cat .env)
    ```

1. Run Django migrations

    ```
    python manage.py migrate
    ```

1. Download and extract frontend assets

    ```
    wget https://github.com/mathesar-foundation/mathesar/releases/download/0.2.0/static_files.zip
    unzip static_files.zip && mv static_files mathesar/static/mathesar && rm static_files.zip
    ```

1. Compile Mathesar translation files

    ```
    python manage.py compilemessages
    ```

1. Restart the gunicorn server

    ```
    systemctl restart gunicorn
    ```
