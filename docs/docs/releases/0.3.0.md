# Mathesar 0.3.0 (W.I.P)

Work In Progress

TODO: Release notes need to be updated

## Upgrading to 0.3.0  {:#upgrading}

## (TO CATEGORIZE)

- UI redesign and dark mode [#4380](https://github.com/mathesar-foundation/mathesar/pull/4380 "UI redesign and dark mode")
- Scripts to package, install, upgrade, run Mathesar [#4399](https://github.com/mathesar-foundation/mathesar/pull/4399 "Scripts to package, install, upgrade, run Mathesar")
- Update color variables and components [#4483](https://github.com/mathesar-foundation/mathesar/pull/4483 "Update color variables and components")
- Persist custom column widths in explorations [#4453](https://github.com/mathesar-foundation/mathesar/pull/4453 "Persist custom column widths in explorations")
- Merge master into develop [#4487](https://github.com/mathesar-foundation/mathesar/pull/4487 "Merge master into develop")
- Add pagination to record selector [#4534](https://github.com/mathesar-foundation/mathesar/pull/4534 "Add pagination to record selector")
- Fix cast_to_mathesar_money [#4415](https://github.com/mathesar-foundation/mathesar/pull/4415 "Fix cast_to_mathesar_money")
- Small data explorer UI adjustments [#4440](https://github.com/mathesar-foundation/mathesar/pull/4440 "Small data explorer UI adjustments")
- Improve CSS sizing variable names [#4439](https://github.com/mathesar-foundation/mathesar/pull/4439 "Improve CSS sizing variable names")
- Fix install script to accept unix domain socket based connections [#4533](https://github.com/mathesar-foundation/mathesar/pull/4533 "Fix install script to accept unix domain socket based connections")
- Merge 0.2.3 release back into develop [#4438](https://github.com/mathesar-foundation/mathesar/pull/4438 "Merge 0.2.3 release back into develop")
- Dark Mode toggle [#4407](https://github.com/mathesar-foundation/mathesar/pull/4407 "Dark Mode toggle")
- Merge master into develop correctly [#4497](https://github.com/mathesar-foundation/mathesar/pull/4497 "Merge master into develop correctly")
- Simplify data explorer [#4446](https://github.com/mathesar-foundation/mathesar/pull/4446 "Simplify data explorer")
- Use kwargs for creating psycopg connections [#4503](https://github.com/mathesar-foundation/mathesar/pull/4503 "Use kwargs for creating psycopg connections")
- fix indentation [#4472](https://github.com/mathesar-foundation/mathesar/pull/4472 "fix indentation")
- Fix CI [#4452](https://github.com/mathesar-foundation/mathesar/pull/4452 "Fix CI")
- Decouple .env file and Caddyfile, improve deployment instructions [#4508](https://github.com/mathesar-foundation/mathesar/pull/4508 "Decouple .env file and Caddyfile, improve deployment instructions")
- Fix general padding and schema card styles [#4477](https://github.com/mathesar-foundation/mathesar/pull/4477 "Fix general padding and schema card styles")
- Prompt user when connection string is provided and env file has connection parameters [#4540](https://github.com/mathesar-foundation/mathesar/pull/4540 "Prompt user when connection string is provided and env file has connection parameters")
- Pass casting options when importing [#4426](https://github.com/mathesar-foundation/mathesar/pull/4426 "Pass casting options when importing")
- Allow pasting data into draft record rows [#4505](https://github.com/mathesar-foundation/mathesar/pull/4505 "Allow pasting data into draft record rows")
- Fix not null SQL [#4531](https://github.com/mathesar-foundation/mathesar/pull/4531 "Fix not null SQL")
- cache on push to develop [#4471](https://github.com/mathesar-foundation/mathesar/pull/4471 "cache on push to develop")
- Alter column refactor part 1 [#4499](https://github.com/mathesar-foundation/mathesar/pull/4499 "Alter column refactor part 1")
- Add support for user helper info text in form inputs [#4476](https://github.com/mathesar-foundation/mathesar/pull/4476 "Add support for user helper info text in form inputs")
- Add language selector to complete installation template [#4449](https://github.com/mathesar-foundation/mathesar/pull/4449 "Add language selector to complete installation template")
- Fix broken template tags in complete_installation Django template [#4442](https://github.com/mathesar-foundation/mathesar/pull/4442 "Fix broken template tags in complete_installation Django template")
- Add initial security policy [#4548](https://github.com/mathesar-foundation/mathesar/pull/4548 "Add initial security policy")
- Clean up front end linting warnings [#4444](https://github.com/mathesar-foundation/mathesar/pull/4444 "Clean up front end linting warnings")
- Use docker pull before docker compose in CI [#4478](https://github.com/mathesar-foundation/mathesar/pull/4478 "Use docker pull before docker compose in CI")
- Always display external links icon in the DocsLink component [#4450](https://github.com/mathesar-foundation/mathesar/pull/4450 "Always display external links icon in the DocsLink component")
- Bump requests from 2.32.3 to 2.32.4 [#4539](https://github.com/mathesar-foundation/mathesar/pull/4539 "Bump requests from 2.32.3 to 2.32.4")
- Add pull_policy to dev docker service [#4447](https://github.com/mathesar-foundation/mathesar/pull/4447 "Add pull_policy to dev docker service")
- Update command in developer guide to start dev-service [#4448](https://github.com/mathesar-foundation/mathesar/pull/4448 "Update command in developer guide to start dev-service")
- Bump django from 4.2.18 to 4.2.21 [#4451](https://github.com/mathesar-foundation/mathesar/pull/4451 "Bump django from 4.2.18 to 4.2.21")
- Add primary key flag to exploration column metadata [#4460](https://github.com/mathesar-foundation/mathesar/pull/4460 "Add primary key flag to exploration column metadata")
- Use the record selector when filtering a UUID FK column [#4491](https://github.com/mathesar-foundation/mathesar/pull/4491 "Use the record selector when filtering a UUID FK column")
- Bump django from 4.2.21 to 4.2.22 [#4537](https://github.com/mathesar-foundation/mathesar/pull/4537 "Bump django from 4.2.21 to 4.2.22")
- Merge master into develop clean [#4498](https://github.com/mathesar-foundation/mathesar/pull/4498 "Merge master into develop clean")

### For installations using Docker Compose

If you have a Docker compose installation, run the command below:

```
docker compose -f /etc/mathesar/docker-compose.yml up --pull always -d
```

!!! warning "Your installation directory may be different"
    You may need to change `/etc/mathesar/` in the command above if you chose to install Mathesar to a different directory.

### For direct installations of Mathesar on Linux, macOS, or WSL

Starting with Mathesar 0.3.0, we provide an install script that automates both fresh installs and upgrades for standalone (non-Docker) installations.

!!! tip "Previously referred to as "Installation from scratch""
    In versions earlier than 0.3.0 this setup was referred to as "Installation from scratch"

Follow the steps below to upgrade Mathesar:

1. Go to your Mathesar installation directory

    ```
    cd xMATHESAR_INSTALL_DIRx
    ```

    !!! note
        Your installation directory may be different from above if you used a different directory when installing Mathesar.

1. Download and run the install script for 0.3.0

    ```
    curl -sSfL https://github.com/mathesar-foundation/mathesar/releases/download/0.3.0/install.sh -o install.sh
    chmod +x install.sh

    ./install.sh .
    ```

1. Replace your gunicorn systemd service with a Mathesar systemd service

    1. Disable and stop the existing gunicorn service
        ```
        systemctl disable gunicorn.service
        systemctl stop gunicorn.service
        ```

    2. Follow the steps in [Run Mathesar as a systemd service](../administration/install-from-scratch.md#run-mathesar-as-a-systemd-service) from the installation guide

    3. Remove the gunicorn service file
        ```
        sudo rm /lib/systemd/system/gunicorn.service
        ```

1. Update your Caddyfile

    1. Use the configuration shown in [Install and configure Caddy](../administration/install-from-scratch.md/##install-and-configure-caddy) in the installation guide, and update your Caddyfile accordingly

    1. Ensure that your domains are specified directly in the first line of the Caddyfile

    1. Restart your Caddy service
      ```
      systemctl restart caddy.service
      ```

!!! tip
    **If you're running Mathesar only on localhost and do not want it to run a service**, you could:

    1. Remove the gunicorn and caddy services
    1. Start Mathesar manually with:
      ```
      mathesar run
      ```
